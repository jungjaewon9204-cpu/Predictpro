<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PredictPro - Professional Prediction Platform</title>
    <!-- Load Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Lucide icons for professional look -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* Custom styles for the specified Inter font and smooth transitions */
        :root {
            --color-primary: #4F46E5; /* Indigo */
            --color-success: #10B981; /* Green */
            --color-premium: #8B5CF6; /* Purple */
            --color-pending: #F59E0B; /* Amber */
            --color-danger: #EF4444; /* Red */
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* Light Gray background */
        }

        /* Hero Gradient specified in the brief */
        .hero-gradient {
            background: linear-gradient(135deg, #4F46E5 0%, #3B82F6 100%);
        }

        /* Smooth hover effects for buttons/cards */
        .transition-all {
            transition-property: all;
            transition-duration: 300ms;
            transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Modal Styles */
        .modal-overlay {
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.3s, visibility 0.3s;
        }

        .modal-overlay.active {
            visibility: visible;
            opacity: 1;
        }
        
        /* Custom scrollbar for modal content */
        .modal-content-area::-webkit-scrollbar {
            width: 8px;
        }
        .modal-content-area::-webkit-scrollbar-thumb {
            background-color: #ccc;
            border-radius: 4px;
        }

        /* Page switching classes */
        .page {
            display: none;
        }
        .page.active {
            display: block;
        }

        /* Banned user row style */
        .banned-row {
            background-color: #fee2e2;
            text-decoration: line-through;
            opacity: 0.6;
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'pr-blue': 'var(--color-primary)',
                        'pr-success': 'var(--color-success)',
                        'pr-premium': 'var(--color-premium)',
                        'pr-pending': 'var(--color-pending)',
                        'pr-danger': 'var(--color-danger)',
                    }
                }
            }
        }

        // Global variables required for Canvas environment
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};
        const apiKey = ""; // API key is provided by the environment
        const apiUrl = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent';

        // --- MOCK DATABASE ---
        let mockUserDatabase = [
            { id: 'u1001', email: 'john.doe@example.com', status: 'verified', name: 'John Doe' },
            { id: 'u1002', email: 'jane.smith@example.com', status: 'pending', name: 'Jane Smith' },
            { id: 'u1003', email: 'user.to.ban@example.com', status: 'verified', name: 'Alex Johnson' },
            { id: 'u1004', email: 'test.user@example.com', status: 'pending', name: 'Test User' },
            { id: 'u1005', email: 'banned.user@example.com', status: 'banned', name: 'Sam Banned' },
        ];

        let mockPaymentDatabase = [
            { id: 'p2001', userId: 'u1002', userEmail: 'jane.smith@example.com', name: 'Jane Smith', amount: 300, screenshot: 'https://placehold.co/300x150/F59E0B/white?text=Payment+Screenshot', bookingCode: 'PRED-A9B3-F4G7-H1J2', predictorName: 'Aviator Predictor' },
            { id: 'p2002', userId: 'u1004', userEmail: 'test.user@example.com', name: 'Test User', amount: 200, screenshot: 'https://placehold.co/300x150/F59E0B/white?text=Payment+Screenshot', bookingCode: 'PRED-C5D8-E9F1-K3L4', predictorName: 'Gems Predictor ðŸ’Ž' },
        ];

        // --- PAGE ROUTING ---
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            const newPage = document.getElementById(pageId);
            if (newPage) {
                newPage.classList.add('active');
            }
            // Hide header on login page, show on others
            const header = document.getElementById('main-header');
            if (pageId === 'page-login') {
                header.classList.add('hidden');
            } else {
                header.classList.remove('hidden');
            }

            if (pageId === 'page-admin') {
                initAdminDashboard();
            }
        }

        // --- ADMIN DASHBOARD LOGIC ---
        function initAdminDashboard() {
            showAdminTab('users');
            renderUserTable();
            renderPaymentQueue();
            updatePaymentCount();
        }

        function showAdminTab(tabId) {
            // Hide all content areas
            document.getElementById('admin-content-users').classList.add('hidden');
            document.getElementById('admin-content-payments').classList.add('hidden');
            // Deactivate all tab buttons
            document.getElementById('admin-tab-users').classList.remove('bg-pr-blue', 'text-white');
            document.getElementById('admin-tab-payments').classList.remove('bg-pr-blue', 'text-white');
            
            // Show the selected tab content and activate button
            document.getElementById(`admin-content-${tabId}`).classList.remove('hidden');
            document.getElementById(`admin-tab-${tabId}`).classList.add('bg-pr-blue', 'text-white');
        }

        function renderUserTable() {
            const tableBody = document.getElementById('user-table-body');
            tableBody.innerHTML = '';
            mockUserDatabase.forEach(user => {
                let statusBadge;
                switch(user.status) {
                    case 'verified':
                        statusBadge = `<span class="px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-pr-success text-white">Verified</span>`;
                        break;
                    case 'pending':
                        statusBadge = `<span class="px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-pr-pending text-white">Pending</span>`;
                        break;
                    case 'banned':
                        statusBadge = `<span class="px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-pr-danger text-white">Banned</span>`;
                        break;
                }
                const rowClass = user.status === 'banned' ? 'banned-row' : '';
                const row = `
                    <tr class="${rowClass}">
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${user.name}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${user.email}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${user.id}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm">${statusBadge}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2">
                            <button ${user.status === 'verified' ? 'disabled' : ''} onclick="verifyUser('${user.id}')" class="text-pr-success hover:text-green-700 disabled:opacity-30 disabled:cursor-not-allowed" title="Verify"><i data-lucide="check-circle-2" class="w-5 h-5"></i></button>
                            <button ${user.status === 'banned' ? 'disabled' : ''} onclick="banUser('${user.id}')" class="text-pr-danger hover:text-red-700 disabled:opacity-30 disabled:cursor-not-allowed" title="Ban"><i data-lucide="slash" class="w-5 h-5"></i></button>
                            <button onclick="removeUser('${user.id}')" class="text-gray-500 hover:text-pr-danger" title="Remove"><i data-lucide="trash-2" class="w-5 h-5"></i></button>
                        </td>
                    </tr>
                `;
                tableBody.innerHTML += row;
            });
            lucide.createIcons(); // Re-render icons
        }

        function renderPaymentQueue() {
            const queueContainer = document.getElementById('payment-queue-container');
            queueContainer.innerHTML = '';
            if (mockPaymentDatabase.length === 0) {
                queueContainer.innerHTML = '<p class="text-gray-500">No pending payments.</p>';
                return;
            }
            mockPaymentDatabase.forEach(payment => {
                const card = `
                    <div class="bg-white rounded-lg shadow-md border border-gray-200 overflow-hidden">
                        <img src="${payment.screenshot}" alt="Payment Screenshot" class="w-full h-32 object-cover" onerror="this.src='https://placehold.co/300x150/F59E0B/white?text=Image+Not+Found'">
                        <div class="p-4">
                            <p class="text-sm font-medium text-gray-900">${payment.userEmail}</p>
                            <p class="text-lg font-bold text-pr-blue">Ksh ${payment.amount}</p>
                            <p class="text-xs text-gray-500 mt-1">Booked: ${payment.predictorName}</p>
                            <p class="text-xs text-gray-500 mt-1">Code: ${payment.bookingCode}</p>
                        </div>
                        <div class="p-4 bg-gray-50 grid grid-cols-2 gap-3">
                            <button onclick="openApprovalModal('${payment.id}')" class="w-full inline-flex items-center justify-center px-3 py-2 border border-transparent text-sm font-semibold rounded-lg shadow-sm text-white bg-pr-success hover:bg-green-600 transition-all">
                                <i data-lucide="check" class="w-4 h-4 mr-1"></i>Approve
                            </button>
                            <button onclick="declinePayment('${payment.id}')" class="w-full inline-flex items-center justify-center px-3 py-2 border border-transparent text-sm font-semibold rounded-lg shadow-sm text-white bg-pr-danger hover:bg-red-700 transition-all">
                                <i data-lucide="x" class="w-4 h-4 mr-1"></i>Decline
                            </button>
                        </div>
                    </div>
                `;
                queueContainer.innerHTML += card;
            });
            lucide.createIcons();
        }

        function updatePaymentCount() {
             document.getElementById('payment-count-badge').textContent = mockPaymentDatabase.length;
        }

        // --- Admin User Actions ---
        function verifyUser(userId) {
            const user = mockUserDatabase.find(u => u.id === userId);
            if (user) {
                user.status = 'verified';
                renderUserTable();
            }
        }

        function banUser(userId) {
            const user = mockUserDatabase.find(u => u.id === userId);
            if (user) {
                user.status = 'banned';
                renderUserTable();
            }
        }

        function removeUser(userId) {
            mockUserDatabase = mockUserDatabase.filter(u => u.id !== userId);
            renderUserTable();
        }

        // --- Admin Payment Actions ---
        function openApprovalModal(paymentId) {
            const payment = mockPaymentDatabase.find(p => p.id === paymentId);
            if (!payment) return;

            document.getElementById('approval-modal-title').textContent = `Approve Payment for ${payment.name}`;
            document.getElementById('approval-user-info').textContent = `${payment.userEmail} - ${payment.predictorName} (Ksh ${payment.amount})`;
            document.getElementById('approval-message-output').value = "Click 'Generate' to create a welcome message.";
            document.getElementById('approval-generate-btn').onclick = () => generateWelcomeMessage(payment);
            document.getElementById('approval-confirm-btn').onclick = () => confirmAndApprovePayment(payment.id);
            
            document.getElementById('approval-modal').classList.add('active');
        }

        function closeApprovalModal() {
            document.getElementById('approval-modal').classList.remove('active');
        }

        function confirmAndApprovePayment(paymentId) {
            const payment = mockPaymentDatabase.find(p => p.id === paymentId);
            if(payment) verifyUser(payment.userId);
            
            mockPaymentDatabase = mockPaymentDatabase.filter(p => p.id !== paymentId);
            renderPaymentQueue();
            renderUserTable();
            updatePaymentCount();
            closeApprovalModal();
        }

        function declinePayment(paymentId) {
            mockPaymentDatabase = mockPaymentDatabase.filter(p => p.id !== paymentId);
            renderPaymentQueue();
            updatePaymentCount();
        }

        // --- LOGIN LOGIC ---
        function handleLogin(event) {
            event.preventDefault();
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            const errorEl = document.getElementById('login-error');

            // Mock admin login
            if (email === 'admin@predictpro.com' && password === 'admin123') {
                errorEl.classList.add('hidden');
                showPage('page-admin');
            } else {
                errorEl.textContent = 'Invalid credentials. (Hint: admin@predictpro.com / admin123)';
                errorEl.classList.remove('hidden');
            }
        }

        // --- LLM API CALLER ---
        async function fetchWithBackoff(url, options, retries = 5, delay = 1000) {
            for (let i = 0; i < retries; i++) {
                try {
                    const response = await fetch(url, options);
                    if (response.status === 429 && i < retries - 1) {
                        await new Promise(resolve => setTimeout(resolve, delay));
                        delay *= 2; 
                        continue;
                    }
                    if (!response.ok) {
                        throw new Error(`API call failed with status: ${response.status}`);
                    }
                    return response;
                } catch (error) {
                    if (i === retries - 1) {
                        console.error('Fetch failed after all retries:', error);
                        throw error;
                    }
                    await new Promise(resolve => setTimeout(resolve, delay));
                    delay *= 2;
                }
            }
        }

        // --- LLM FEATURE 1: Strategy Generator (Public) ---
        async function generateStrategy() {
            const predictorName = document.getElementById('strategy-predictor-name').textContent.replace('Strategy for ', '');
            const goalInput = document.getElementById('strategy-goal-input');
            const outputArea = document.getElementById('strategy-output');
            const goal = goalInput.value.trim();

            if (!goal) {
                outputArea.innerHTML = '<p class="text-red-500">Please state a specific goal for the strategy.</p>';
                return;
            }

            outputArea.innerHTML = `
                <div class="flex items-center justify-center space-x-2 text-pr-blue">
                    <svg class="animate-spin h-5 w-5 text-pr-blue" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                    <span class="font-medium">Generating professional strategy...</span>
                </div>
            `;
            
            const userQuery = `Generate a high-level strategic outline for the "${predictorName}" based on the goal: "${goal}". Focus on a professional, trustworthy, and disciplined approach.`;

            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: {
                    parts: [{ text: "You are PredictPro's Head Analyst. Your task is to provide a concise, high-level strategic outline for a user based on their chosen prediction category and stated goal. The output must be highly professional, structured, and ethical, emphasizing disciplined risk management and data analysis, never guaranteeing outcomes. Output the strategy in a clean Markdown format suitable for display, using relevant headings." }]
                },
                tools: [{ "google_search": {} }],
            };
            
            try {
                const response = await fetchWithBackoff(`${apiUrl}?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();
                const text = result.candidates?.[0]?.content?.parts?.[0]?.text || "Error: Could not retrieve strategy. Please try again.";
                
                const htmlText = text
                    .replace(/^### (.*)$/gm, '<h3 class="text-xl font-bold mt-4 mb-2 text-pr-blue">$1</h3>')
                    .replace(/^## (.*)$/gm, '<h2 class="text-2xl font-extrabold mt-6 mb-3 text-gray-900">$1</h2>')
                    .replace(/^- (.*)$/gm, '<li class="text-gray-600 mb-1"><span classD="font-bold text-gray-900 mr-2">&bull;</span>$1</li>')
                    .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                    .replace(/([^\n]+)/g, (match) => {
                        if (match.startsWith('<h') || match.startsWith('<li')) return match;
                        return `<p class="mt-2 text-gray-700 leading-relaxed">${match}</p>`;
                    });

                let sourcesHtml = '';
                const groundingMetadata = result.candidates?.[0]?.groundingMetadata;
                if (groundingMetadata && groundingMetadata.groundingAttributions) {
                    const sources = groundingMetadata.groundingAttributions
                        .map(attribution => ({ uri: attribution.web?.uri, title: attribution.web?.title }))
                        .filter(source => source.uri && source.title);

                    if (sources.length > 0) {
                        sourcesHtml = `<div class="mt-6 pt-4 border-t border-gray-100"><p class="text-xs font-semibold text-gray-500 mb-2">Sources:</p>`;
                        sources.slice(0, 3).forEach((source, index) => {
                            sourcesHtml += `<a href="${source.uri}" target="_blank" class="block text-xs text-indigo-500 hover:text-indigo-700 truncate">${index + 1}. ${source.title}</a>`;
                        });
                        sourcesHtml += `</div>`;
                    }
                }

                outputArea.innerHTML = `<div class="p-4 bg-gray-50 rounded-lg">${htmlText}${sourcesHtml}</div>`;

            } catch (error) {
                console.error("Gemini API Error:", error);
                outputArea.innerHTML = '<p class="text-red-500">A network error occurred. Please check your connection or try again.</p>';
            }
        }

        function openStrategyModal(predictorName) {
            const modal = document.getElementById('strategy-modal');
            document.getElementById('strategy-predictor-name').textContent = `Strategy for ${predictorName}`;
            document.getElementById('strategy-output').innerHTML = '<p class="text-gray-500 text-center">Enter your specific goal above and click "Generate" to see a professional strategic outline.</p>';
            document.getElementById('strategy-goal-input').value = ''; 
            modal.classList.add('active');
        }

        function closeStrategyModal() {
            document.getElementById('strategy-modal').classList.remove('active');
        }

        // --- LLM FEATURE 2: Admin Welcome Message (Admin) ---
        async function generateWelcomeMessage(payment) {
            const outputArea = document.getElementById('approval-message-output');
            outputArea.value = "Generating message...";

            // Calculate scheduling date (2-3 days in future)
            const scheduleDate = new Date();
            const daysToAdd = 2 + Math.floor(Math.random() * 2); // 2 or 3 days
            scheduleDate.setDate(scheduleDate.getDate() + daysToAdd);
            const formattedDate = scheduleDate.toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric' });

            const userQuery = `Generate a WhatsApp welcome message for user ${payment.name}.
            Details:
            - Payment Amount: Ksh ${payment.amount}
            - Predictor: ${payment.predictorName}
            - Scheduled Date: ${formattedDate}
            `;

            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: {
                    parts: [{ text: "You are a professional, friendly admin at PredictPro. Your task is to generate a confirmation message for a user whose payment has been approved. The message must be sent via WhatsApp. Start with 'Hello [User Name],'. Be welcoming, confirm their payment details (predictor, amount), and clearly state their scheduled prediction date and the delivery time (6 PM - 1 AM). Do not add any sign-off or 'Admin' name." }]
                },
            };
            
            try {
                const response = await fetchWithBackoff(`${apiUrl}?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();
                const text = result.candidates?.[0]?.content?.parts?.[0]?.text || "Error: Could not retrieve message. Please try again.";
                
                outputArea.value = text;

            } catch (error) {
                console.error("Gemini API Error:", error);
                outputArea.value = 'A network error occurred. Please try again.';
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            const goalInput = document.getElementById('strategy-goal-input');
            if (goalInput) {
                goalInput.addEventListener('keydown', (event) => {
                    if (event.key === 'Enter') {
                        event.preventDefault();
                        generateStrategy();
                    }
                });
            }
        });
    </script>
</head>
<body class="antialiased">

    <!-- Header & Navigation -->
    <header id="main-header" class="bg-white shadow-md sticky top-0 z-10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-4 md:justify-start md:space-x-10">
                <div class="flex justify-start lg:w-0 lg:flex-1">
                    <button onclick="showPage('page-landing')" class="flex items-center space-x-2">
                        <span class="text-3xl font-extrabold text-pr-blue">PredictPro</span>
                    </button>
                </div>
                <nav class="hidden md:flex space-x-10">
                    <a href="#predictors" class="text-base font-medium text-gray-500 hover:text-pr-blue transition-all">Predictors</a>
                    <a href="#trust" class="text-base font-medium text-gray-500 hover:text-pr-blue transition-all">Trust & Security</a>
                    <a href="#" class="text-base font-medium text-gray-500 hover:text-pr-blue transition-all">Admin Info</a>
                </nav>
                <div class="hidden md:flex items-center justify-end md:flex-1 lg:w-0">
                    <button onclick="showPage('page-login')" class="whitespace-nowrap text-base font-medium text-gray-600 hover:text-pr-blue px-4 py-2 rounded-lg transition-all">
                        Sign In
                    </button>
                    <button onclick="showPage('page-login')" class="ml-4 whitespace-nowrap inline-flex items-center justify-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-base font-medium text-white bg-pr-blue hover:bg-indigo-700 transition-all">
                        Get Started
                    </button>
                </div>
                <div class="md:hidden">
                    <button class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-pr-blue">
                        <span class="sr-only">Open main menu</span>
                        <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" /></svg>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- ==== PAGE: LANDING ==== -->
    <div id="page-landing" class="page active">
        <main>
            <!-- Hero Section -->
            <section class="hero-gradient py-20 sm:py-32 rounded-b-3xl shadow-2xl">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-white">
                    <h1 class="text-4xl sm:text-6xl font-extrabold tracking-tight">
                        Professional Prediction Platform.
                    </h1>
                    <p class="mt-4 max-w-2xl mx-auto text-xl sm:text-2xl font-light opacity-90">
                        Get accurate predictions for **Apple**, **Aviator**, **Gems**, **Crash**, and **Sure Odds**.
                    </p>
                    <div class="mt-10 flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-6">
                        <button onclick="showPage('page-login')" class="inline-flex items-center justify-center px-8 py-3 border border-transparent text-base font-semibold rounded-xl shadow-lg text-pr-blue bg-white hover:bg-gray-100 transition-all transform hover:scale-105">
                            <i data-lucide="log-in" class="w-5 h-5 mr-2"></i>
                            Sign In
                        </button>
                        <button onclick="showPage('page-login')" class="inline-flex items-center justify-center px-8 py-3 border border-white text-base font-semibold rounded-xl text-white hover:bg-white hover:text-pr-blue transition-all transform hover:scale-105">
                            <i data-lucide="arrow-right" class="w-5 h-5 mr-2"></i>
                            Get Started
                        </button>
                    </div>
                </div>
            </section>

            <!-- Predictor Features Section -->
            <section id="predictors" class="py-16 sm:py-24 bg-white">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="text-center">
                        <h2 class="text-base text-pr-blue font-semibold tracking-wide uppercase">Our Expertise</h2>
                        <p class="mt-2 text-3xl sm:text-4xl font-extrabold text-gray-900">
                            Select Your Professional Predictor
                        </p>
                        <p class="mt-4 text-xl text-gray-500">
                            Every predictor is managed with precision, ensuring high-quality, dependable results.
                        </p>
                    </div>

                    <div class="mt-12 grid grid-cols-1 gap-8 md:grid-cols-2 lg:grid-cols-3">
                        
                        <!-- 1. Sure Odds Predictor (Success Green) - Booking CTA -->
                        <div class="bg-white rounded-xl shadow-lg border-t-8 border-pr-success p-6 transform hover:-translate-y-1 transition-all flex flex-col justify-between">
                            <div>
                                <div class="flex items-center space-x-4">
                                    <span class="inline-flex items-center justify-center p-3 rounded-full bg-pr-success bg-opacity-10 text-pr-success">
                                        <i data-lucide="check-circle-2" class="w-6 h-6"></i>
                                    </span>
                                    <h3 class="text-2xl font-bold text-gray-900">Sure Odds</h3>
                                </div>
                                <p class="mt-4 text-gray-500">
                                    **Cost: 100 shillings.** Instant code generation and immediate delivery to WhatsApp. Fast, reliable, and straightforward.
                                </p>
                            </div>
                            <button class="mt-6 w-full inline-flex items-center justify-center px-4 py-2 border border-transparent text-base font-semibold rounded-xl shadow-sm text-white bg-pr-success hover:bg-green-600 transition-all">
                                Book Instant Odds
                            </button>
                        </div>

                        <!-- 2. Aviator Predictor (Flight Blue) - Strategy CTA -->
                        <div class="bg-white rounded-xl shadow-lg border-t-8 border-blue-500 p-6 transform hover:-translate-y-1 transition-all flex flex-col justify-between">
                            <div>
                                <div class="flex items-center space-x-4">
                                    <span class="inline-flex items-center justify-center p-3 rounded-full bg-blue-500 bg-opacity-10 text-blue-500">
                                        <i data-lucide="plane" class="w-6 h-6"></i>
                                    </span>
                                    <h3 class="text-2xl font-bold text-gray-900">Aviator Predictor</h3>
                                </div>
                                <p class="mt-4 text-gray-500">
                                    Harnessing flight-themed precision. Book your appointment and secure your prediction date through our structured verification process.
                                </p>
                            </div>
                            <button onclick="openStrategyModal('Aviator Predictor')" class="mt-6 w-full inline-flex items-center justify-center px-4 py-2 border border-transparent text-base font-semibold rounded-xl shadow-sm text-pr-blue bg-blue-100 hover:bg-blue-200 transition-all">
                                Generate Strategy Outline âœ¨
                            </button>
                        </div>
                        
                        <!-- 3. Crash Predictor (Excitement Red) - Strategy CTA -->
                        <div class="bg-white rounded-xl shadow-lg border-t-8 border-red-500 p-6 transform hover:-translate-y-1 transition-all flex flex-col justify-between">
                            <div>
                                <div class="flex items-center space-x-4">
                                    <span class="inline-flex items-center justify-center p-3 rounded-full bg-red-500 bg-opacity-10 text-red-500">
                                        <i data-lucide="alert-triangle" class="w-6 h-6"></i>
                                    </span>
                                    <h3 class="text-2xl font-bold text-gray-900">Crash Predictor</h3>
                                </div>
                                <p class="mt-4 text-gray-500">
                                    Designed for high-stakes environments. Requires a deposit and admin confirmation before assignment to a dedicated prediction slot.
                                </p>
                            </div>
                            <button onclick="openStrategyModal('Crash Predictor')" class="mt-6 w-full inline-flex items-center justify-center px-4 py-2 border border-transparent text-base font-semibold rounded-xl shadow-sm text-pr-blue bg-red-100 hover:bg-red-200 transition-all">
                                Generate Strategy Outline âœ¨
                            </button>
                        </div>

                        <!-- 4. Gems Predictor (Premium Purple) - Strategy CTA -->
                        <div class="bg-white rounded-xl shadow-lg border-t-8 border-pr-premium p-6 transform hover:-translate-y-1 transition-all flex flex-col justify-between">
                            <div>
                                <div class="flex items-center space-x-4">
                                    <span class="inline-flex items-center justify-center p-3 rounded-full bg-pr-premium bg-opacity-10 text-pr-premium">
                                        <i data-lucide="gem" class="w-6 h-6"></i>
                                    </span>
                                    <h3 class="text-2xl font-bold text-gray-900">Gems Predictor ðŸ’Ž</h3>
                                </div>
                                <p class="mt-4 text-gray-500">
                                    Our luxury prediction service. This premium offering is handled with the highest level of security and expertise.
                                </p>
                            </div>
                            <button onclick="openStrategyModal('Gems Predictor ðŸ’Ž')" class="mt-6 w-full inline-flex items-center justify-center px-4 py-2 border border-transparent text-base font-semibold rounded-xl shadow-sm text-pr-blue bg-purple-100 hover:bg-purple-200 transition-all">
                                Generate Strategy Outline âœ¨
                            </button>
                        </div>
                        
                        <!-- 5. Apple Predictor (Neutral/Tech) - Strategy CTA -->
                        <div class="bg-white rounded-xl shadow-lg border-t-8 border-gray-400 p-6 transform hover:-translate-y-1 transition-all flex flex-col justify-between">
                            <div>
                                <div class="flex items-center space-x-4">
                                    <span class="inline-flex items-center justify-center p-3 rounded-full bg-gray-400 bg-opacity-10 text-gray-700">
                                        <i data-lucide="monitor" class="w-6 h-6"></i>
                                    </span>
                                    <h3 class="text-2xl font-bold text-gray-900">Apple Predictor</h3>
                                </div>
                                <p class="mt-4 text-gray-500">
                                    A neutral and dependable prediction model utilizing advanced technological analysis. Secure your spot today.
                                </p>
                            </div>
                            <button onclick="openStrategyModal('Apple Predictor')" class="mt-6 w-full inline-flex items-center justify-center px-4 py-2 border border-transparent text-base font-semibold rounded-xl shadow-sm text-pr-blue bg-gray-100 hover:bg-gray-200 transition-all">
                                Generate Strategy Outline âœ¨
                            </button>
                        </div>

                        <!-- Call to Action Card -->
                        <div class="hero-gradient rounded-xl shadow-2xl p-8 flex flex-col justify-center items-center">
                            <h3 class="text-2xl font-bold text-white text-center">Ready to Start?</h3>
                            <p class="mt-2 text-white text-center opacity-90">
                                Join PredictPro today and experience the professional difference.
                            </p>
                            <button onclick="showPage('page-login')" class="mt-6 w-full inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-semibold rounded-xl shadow-sm text-pr-blue bg-white hover:bg-gray-100 transition-all transform hover:scale-105">
                                Create Account
                            </button>
                        </div>

                    </div>
                </div>
            </section>
            
            <!-- Trust & Security Signals -->
            <section id="trust" class="py-16 bg-gray-50">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="lg:text-center">
                        <h2 class="text-base text-pr-blue font-semibold tracking-wide uppercase">Trust, Transparency, Expertise</h2>
                        <p class="mt-2 text-3xl sm:text-4xl font-extrabold text-gray-900">
                            Why PredictPro is Built on Confidence
                        </p>
                    </div>

                    <div class="mt-10">
                        <dl class="space-y-10 md:space-y-0 md:grid md:grid-cols-2 md:gap-x-8 md:gap-y-10">
                            <div class="flex">
                                <div class="flex-shrink-0">
                                    <div class="flex items-center justify-center h-12 w-12 rounded-xl bg-pr-blue text-white shadow-lg">
                                        <i data-lucide="shield" class="w-6 h-6"></i>
                                    </div>
                                </div>
                                <div class="ml-4">
                                    <dt class="text-lg leading-6 font-medium text-gray-900">Secure & Verified Payments</dt>
                                    <dd class="mt-2 text-base text-gray-500">
                                        All payments are securely processed and verified against the designated account holder **Fridah Chepwogen** (0108997548), ensuring a safe booking environment.
                                    </dd>
                                </div>
                            </div>

                            <div class="flex">
                                <div class="flex-shrink-0">
                                    <div class="flex items-center justify-center h-12 w-12 rounded-xl bg-pr-success text-white shadow-lg">
                                        <i data-lucide="user-check" class="w-6 h-6"></i>
                                    </div>
                                </div>
                                <div class="ml-4">
                                    <dt class="text-lg leading-6 font-medium text-gray-900">Expert Admin Oversight</dt>
                                    <dd class="mt-2 text-base text-gray-500">
                                        Our Super Admins are clearly marked with a **meta-verified blue tick** and manage the system with full integrity. Anti-fraud measures are instant and decisive.
                                    </D>
                                </div>
                            </div>
                        </dl>
                    </div>
                </div>
            </section>
        </main>
        
        <!-- Footer -->
        <footer class="bg-gray-800 mt-12">
            <div class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
                <div class="flex flex-col md:flex-row justify-between items-center text-center md:text-left">
                    <p class="text-gray-400">&copy; 2025 PredictPro. All rights reserved. Trust, Expertise, Results.</p>
                    <div class="flex space-x-6 mt-4 md:mt-0">
                        <a href="#" class="text-gray-400 hover:text-white transition-all">Privacy Policy</a>
                        <a href="#" class="text-gray-400 hover:text-white transition-all">Terms of Service</a>
                        <a href="httpsa://wa.me/254746973459" target="_blank" class="text-pr-success hover:text-white flex items-center transition-all">
                             <i data-lucide="message-square" class="w-4 h-4 mr-1"></i> WhatsApp Support
                        </a>
                    </div>
                </div>
                <p class="mt-4 text-xs text-gray-500 text-center">
                    Official Payment Account: **Fridah Chepwogen** (0108997548)
                </p>
            </div>
        </footer>
    </div>

    <!-- ==== PAGE: LOGIN ==== -->
    <div id="page-login" class="page">
        <div class="min-h-screen hero-gradient flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8">
            <div class="max-w-md w-full space-y-8 bg-white p-10 rounded-2xl shadow-2xl">
                <div>
                    <h2 class="text-center text-4xl font-extrabold text-pr-blue">
                        PredictPro
                    </h2>
                    <p class="mt-2 text-center text-sm text-gray-600">
                        Sign in to your account
                    </p>
                </div>
                <form class="mt-8 space-y-6" onsubmit="handleLogin(event)">
                    <div class="rounded-md shadow-sm -space-y-px">
                        <div>
                            <label for="login-email" class="sr-only">Email address</label>
                            <input id="login-email" name="email" type="email" autocomplete="email" required class="appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-pr-blue focus:border-pr-blue focus:z-10 sm:text-sm" placeholder="Email address">
                        </div>
                        <div>
                            <label for="login-password" class="sr-only">Password</label>
                            <input id="login-password" name="password" type="password" autocomplete="current-password" required class="appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-pr-blue focus:border-pr-blue focus:z-10 sm:text-sm" placeholder="Password">
                        </div>
                    </div>

                    <div id="login-error" class="text-red-600 text-sm hidden"></div>

                    <div>
                        <button type="submit" class="group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-pr-blue hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pr-blue transition-all">
                            Sign In
                        </button>
                    </div>
                </form>
                <p class="text-center text-sm text-gray-500">
                    <button onclick="showPage('page-landing')" class="font-medium text-pr-blue hover:text-indigo-500">
                        &larr; Back to Home
                    </button>
                </p>
            </div>
        </div>
    </div>

    <!-- ==== PAGE: ADMIN DASHBOARD ==== -->
    <div id="page-admin" class="page">
        <div class="min-h-screen bg-gray-100">
            <!-- Admin Header -->
            <div class="bg-white shadow-md">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="flex justify-between items-center py-4">
                        <button onclick="showPage('page-landing')" class="flex items-center space-x-2">
                            <span class="text-3xl font-extrabold text-pr-blue">PredictPro</span>
                            <span class="text-2xl font-light text-gray-600">Admin</span>
                        </button>
                        <div class="flex items-center space-x-2">
                            <span class="font-medium text-gray-700">Super Admin</span>
                            <span class="inline-flex items-center justify-center p-1 rounded-full bg-blue-500 text-white">
                                <i data-lucide="shield-check" class="w-5 h-5"></i>
                            </span>
                            <button onclick="showPage('page-login')" class="ml-4 text-sm text-gray-500 hover:text-pr-danger" title="Logout">
                                <i data-lucide="log-out" class="w-5 h-5"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Admin Main Content -->
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                <div class="flex flex-col lg:flex-row lg:space-x-8">
                    
                    <!-- Admin Sidebar -->
                    <div class="lg:w-1/4 mb-6 lg:mb-0">
                        <div class="bg-white rounded-lg shadow-md p-4">
                            <h3 class="text-lg font-semibold text-gray-900 mb-4">Navigation</h3>
                            <nav class="space-y-2">
                                <button id="admin-tab-users" onclick="showAdminTab('users')" class="w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-left text-gray-700 hover:bg-gray-100 transition-all">
                                    <i data-lucide="users" class="w-5 h-5"></i>
                                    <span>User Management</span>
                                </button>
                                <button id="admin-tab-payments" onclick="showAdminTab('payments')" class="w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-left text-gray-700 hover:bg-gray-100 transition-all">
                                    <i data-lucide="banknote" class="w-5 h-5"></i>
                                    <span>Payment Approvals</span>
                                    <span id="payment-count-badge" class="px-2 py-0.5 ml-auto text-xs font-medium rounded-full bg-pr-pending text-white">
                                        <!-- JS will populate count -->
                                    </span>
                                </button>
                            </nav>
                        </div>
                    </div>

                    <!-- Admin Content Area -->
                    <div class="lg:w-3/4">
                        <!-- User Management Content -->
                        <div id="admin-content-users" class="hidden">
                            <h2 class="text-2xl font-bold text-gray-900 mb-4">User Management</h2>
                            <div class="bg-white rounded-lg shadow-md overflow-hidden">
                                <table class="min-w-full divide-y divide-gray-200">
                                    <thead class="bg-gray-50">
                                        <tr>
                                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Name</th>
                                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Email</th>
                                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">User ID</th>
                                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                            <th scope="col" class="relative px-6 py-3"><span class="sr-only">Actions</span></th>
                                        </tr>
                                    </thead>
                                    <tbody id="user-table-body" class="bg-white divide-y divide-gray-200">
                                        <!-- JS will render user rows here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Payment Approvals Content -->
                        <div id="admin-content-payments" class="hidden">
                            <h2 class="text-2xl font-bold text-gray-900 mb-4">Payment Approvals</h2>
                            <div id="payment-queue-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                <!-- JS will render payment cards here -->
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>


    <!-- Strategy Generator Modal (LLM Feature 1) -->
    <div id="strategy-modal" class="modal-overlay fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900 bg-opacity-75" onclick="closeStrategyModal()">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-2xl transform transition-all duration-300 scale-100" onclick="event.stopPropagation()">
            <!-- Modal Header -->
            <div class="px-6 py-4 border-b border-gray-100 flex justify-between items-center">
                <h2 id="strategy-predictor-name" class="text-2xl font-extrabold text-pr-blue">Strategy Outline Generator</h2>
                <button onclick="closeStrategyModal()" class="text-gray-400 hover:text-gray-600 transition-all p-1 rounded-full hover:bg-gray-100">
                    <i data-lucide="x" class="w-6 h-6"></i>
                </button>
            </div>
            
            <!-- Modal Body -->
            <div class="p-6">
                <div class="mb-4">
                    <label for="strategy-goal-input" class="block text-sm font-medium text-gray-700 mb-2">Your Specific Goal (e.g., "Maximize returns while limiting exposure to 1 hour.")</label>
                    <div class="flex space-x-2">
                        <input type="text" id="strategy-goal-input" placeholder="Enter your goal here..." class="flex-1 block w-full rounded-xl border-gray-300 shadow-sm focus:border-pr-blue focus:ring-pr-blue p-3 text-sm" />
                        <button onclick="generateStrategy()" class="inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-semibold rounded-xl text-white bg-pr-blue hover:bg-indigo-600 transition-all">
                            Generate
                        </button>
                    </div>
                </div>
                <div id="strategy-output" class="modal-content-area h-96 overflow-y-auto p-4 border border-gray-200 rounded-xl bg-white text-sm">
                    <p class="text-gray-500 text-center">Enter your specific goal above and click "Generate" to see a professional strategic outline.</p>
                </div>
            </div>

            <!-- Modal Footer -->
            <div class="px-6 py-4 border-t border-gray-100 text-right">
                <p class="text-xs text-gray-500">
                    Powered by PredictPro's Head Analyst (via Gemini LLM). Strategy is for informational purposes only.
                </pre>
            </div>
        </div>
    </div>
    
    <!-- Admin Approval Modal (LLM Feature 2) -->
    <div id="approval-modal" class="modal-overlay fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900 bg-opacity-75" onclick="closeApprovalModal()">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-2xl transform transition-all duration-300 scale-100" onclick="event.stopPropagation()">
            <!-- Modal Header -->
            <div class="px-6 py-4 border-b border-gray-100 flex justify-between items-center">
                <h2 id="approval-modal-title" class="text-2xl font-extrabold text-pr-blue">Approve Payment</h2>
                <button onclick="closeApprovalModal()" class="text-gray-400 hover:text-gray-600 transition-all p-1 rounded-full hover:bg-gray-100">
                    <i data-lucide="x" class="w-6 h-6"></i>
                </button>
            </div>
            
            <!-- Modal Body -->
            <div class="p-6">
                <p id="approval-user-info" class="text-sm text-gray-600 mb-4">User: test@example.com - Aviator (Ksh 300)</p>
                
                <label for="approval-message-output" class="block text-sm font-medium text-gray-700 mb-2">Generated WhatsApp Message</label>
                <textarea id="approval-message-output" rows="6" class="w-full p-3 border border-gray-300 rounded-lg bg-gray-50 text-sm" readonly>Click 'Generate' to create a welcome message.</textarea>
                
                <button id="approval-generate-btn" class="mt-4 w-full inline-flex items-center justify-center px-4 py-2 border border-transparent text-base font-semibold rounded-xl shadow-sm text-white bg-pr-blue hover:bg-indigo-700 transition-all">
                    Generate Welcome Message âœ¨
                </button>
            </div>

            <!-- Modal Footer -->
            <div class="px-6 py-4 bg-gray-50 rounded-b-xl flex justify-end space-x-3">
                <button onclick="closeApprovalModal()" class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-all">
                    Cancel
                </Signature>
                <button id="approval-confirm-btn" class="px-4 py-2 text-sm font-medium text-white bg-pr-success rounded-lg hover:bg-green-600 transition-all">
                    Confirm & Approve Payment
                </button>
            </div>
        </div>
    </div>
    
    <!-- Initialize Lucide Icons -->
    <script>
        lucide.createIcons();
        // Show landing page on initial load
        document.addEventListener('DOMContentLoaded', () => {
            showPage('page-landing');
            // Initial payment count
            updatePaymentCount();
        });
    </script>
</body>
</html>
