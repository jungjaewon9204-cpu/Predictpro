<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PredictPro - Auth & OTP Flow</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/lucide@latest"></script>
<style>
  body { font-family: 'Inter', sans-serif; background: #f3f4f6; }
  .page { display: none; }
  .page.active { display: block; }
  .otp-input { width: 3rem; text-align: center; font-weight: bold; }
  .btn { transition: all 0.3s ease; }
</style>
</head>
<body>

<!-- Header -->
<header class="bg-white shadow-md sticky top-0 z-10 p-4">
  <div class="max-w-7xl mx-auto flex justify-between items-center">
      <span class="text-2xl font-bold text-indigo-600">PredictPro</span>
      <a href="https://wa.me/18727575847" target="_blank" class="text-green-600 hover:text-green-800 flex items-center">
          <i data-lucide="message-square" class="w-5 h-5 mr-1"></i> WhatsApp Support
      </a>
  </div>
</header>

<!-- ==== AUTH PAGE ==== -->
<div id="page-auth" class="page active min-h-screen flex items-center justify-center">
  <div class="bg-white p-10 rounded-2xl shadow-2xl w-full max-w-md">
      <h2 class="text-center text-3xl font-extrabold text-indigo-600 mb-2">Welcome to PredictPro</h2>
      <p class="text-center text-gray-500 mb-6">Login or Sign Up to access your dashboard</p>

      <div class="flex justify-center mb-6 space-x-4">
          <button id="login-btn" class="btn px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700">Login</button>
          <button id="signup-btn" class="btn px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">Sign Up</button>
      </div>

      <form id="auth-form" class="space-y-4">
          <input type="email" id="email" placeholder="Enter your email" required
              class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-indigo-500" />
          <input type="password" id="password" placeholder="Enter your password" required
              class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-indigo-500" />
          <button type="submit" class="w-full py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 btn">Continue</button>
      </form>

      <div id="auth-message" class="text-center text-red-500 mt-4 hidden"></div>
  </div>
</div>

<!-- ==== OTP PAGE ==== -->
<div id="page-otp" class="page min-h-screen flex items-center justify-center">
  <div class="bg-white p-10 rounded-2xl shadow-2xl w-full max-w-md text-center">
      <h2 class="text-3xl font-bold text-indigo-600 mb-4">OTP Verification</h2>
      <p class="text-gray-700 mb-4">
        Enter the 6-digit OTP sent to your email. 
        <span class="text-red-600 font-semibold">Do not enter this if you didn't request it!</span>
      </p>

      <div class="flex justify-center space-x-2 mb-4">
          <input type="text" maxlength="1" class="otp-input border rounded-lg p-2 focus:ring-2 focus:ring-indigo-500">
          <input type="text" maxlength="1" class="otp-input border rounded-lg p-2 focus:ring-2 focus:ring-indigo-500">
          <input type="text" maxlength="1" class="otp-input border rounded-lg p-2 focus:ring-2 focus:ring-indigo-500">
          <input type="text" maxlength="1" class="otp-input border rounded-lg p-2 focus:ring-2 focus:ring-indigo-500">
          <input type="text" maxlength="1" class="otp-input border rounded-lg p-2 focus:ring-2 focus:ring-indigo-500">
          <input type="text" maxlength="1" class="otp-input border rounded-lg p-2 focus:ring-2 focus:ring-indigo-500">
      </div>

      <p class="text-gray-500 mb-4">OTP expires in <span id="otp-timer" class="font-bold text-red-600">60</span> seconds</p>
      <button id="verify-otp" class="w-full py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 btn">Verify OTP</button>
      <div id="otp-message" class="text-center mt-4 hidden"></div>
  </div>
</div>

<!-- ==== SUCCESS PAGE ==== -->
<div id="page-success" class="page min-h-screen flex items-center justify-center">
  <div class="bg-white p-10 rounded-2xl shadow-2xl w-full max-w-md text-center">
      <h2 class="text-3xl font-bold text-green-600">Welcome!</h2>
      <p class="mt-4 text-gray-700 mb-6">You have successfully signed in. Download the APK below:</p>
      <a href="#" class="px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 btn">Download APK</a>
  </div>
</div>

<script>
  // Page helper
  function showPage(id){ document.querySelectorAll('.page').forEach(p=>p.classList.remove('active')); document.getElementById(id).classList.add('active'); }

  const authForm = document.getElementById('auth-form');
  const authMessage = document.getElementById('auth-message');
  const otpMessage = document.getElementById('otp-message');
  const otpInputs = document.querySelectorAll('.otp-input');
  let generatedOTP = '';
  let otpTimer;
  let otpSeconds = 60;

  const superAdmin = 'shadowvybez001@gmail.com';

  // OTP Timer
  function startOtpTimer() {
      otpSeconds = 60;
      document.getElementById('otp-timer').textContent = otpSeconds;
      otpTimer = setInterval(()=>{
          otpSeconds--;
          document.getElementById('otp-timer').textContent = otpSeconds;
          if(otpSeconds <=0){ clearInterval(otpTimer); otpMessage.textContent = 'OTP expired. Please request a new one.'; otpMessage.classList.remove('hidden'); otpMessage.classList.add('text-red-600'); }
      },1000);
  }

  // Auth Form Submit
  authForm.addEventListener('submit', e=>{
      e.preventDefault();
      const email = document.getElementById('email').value.trim();
      const password = document.getElementById('password').value.trim();

      // Simple validation
      if(email === '' || password === ''){ authMessage.textContent='Please fill in all fields'; authMessage.classList.remove('hidden'); return; }
      authMessage.classList.add('hidden');

      // Assign super admin
      if(email === superAdmin){ alert('Logged in as Super Admin!'); }

      // Generate OTP
      generatedOTP = Math.floor(100000 + Math.random()*900000).toString();
      console.log('OTP for testing:', generatedOTP);

      showPage('page-otp');
      startOtpTimer();
  });

  // OTP Input auto move
  otpInputs.forEach((input, index)=>{
      input.addEventListener('input', e=>{
          if(e.target.value.length === 1 && index < otpInputs.length-1){ otpInputs[index+1].focus(); }
          if(e.target.value.length === 0 && index >0){ otpInputs[index-1].focus(); }
      });
  });

  // Verify OTP
  document.getElementById('verify-otp').addEventListener('click', ()=>{
      const otp = Array.from(otpInputs).map(i=>i.value).join('');
      if(otp === generatedOTP){ showPage('page-success'); clearInterval(otpTimer); }
      else { otpMessage.textContent='Incorrect OTP. Please try again'; otpMessage.classList.remove('hidden'); otpMessage.classList.add('text-red-600'); }
  });

  // Toggle login/signup buttons
  document.getElementById('login-btn').addEventListener('click', ()=>{ authForm.querySelector('button').textContent='Login'; });
  document.getElementById('signup-btn').addEventListener('click', ()=>{ authForm.querySelector('button').textContent='Sign Up'; });
</script>

</body>
</html>
